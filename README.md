## О проекте ВКР - Binevir

Проект на Flutter, выполненный в качестве выпускной квалификационной работы.

  В качестве технического задания использовались дизайны и прототипы мобильного приложения в Figma, таблицы переводов величин и блок схемы логики расчётов, замечания и правки к оригинальному проекту, а также референсы к исходному коду бекэнда. 

# Недочёты проекта
В ходе работы были недоработаны или не доведены до хорошего уровня следующие элементы:

- **Виджет уведомления об отсутствии интернета** - Одним из додуманных для проекта требований была высокая стабильность работы приложения для мобильных устройств, поэтому подразумевалось, что пользователь не будет видеть экран ошибки подключения к серверу, например если устройство потеряло интернет соединение или упал бэк. Для этого простые ответы с сервера кешировались бы с помощью Hive, и при загрузке на экран без ответа данные бы грузились с локального хранилища, уведомляя пользователя  об отсутствии интернет соединения. При его появлении происходил бы новый запрос к данным, которые могли бы измениться. Для этого и используется виджет NetworkBanner, однако его логика и расположение в целом могло быть более логичным.
- **Кеширование ответов** - Как упоминалось в прошлом пункте для кеша Hive сохраняет данные локально. Для работы с данными были добавлены репозитории, которые отвественны за предоставления и хранения данных. В моем проекте репозиторий отвественнен взаимодействует с сервисом Dio и базой данных Hive, однако есть большие подозрения, что код можно было организовать хитрее, но не уверен, что понятнее (Алгоритм обработки данных есть в письменной работе в виде свимлейна в соответсвующем подпункте и в презентации в приложении работы).
- **Запросы с параметрами** - Бэкенд не имеет реализации выдачи ответов в зависимости от параметра запроса - языка пользователя. Все получаемые данные только на английском, однако благодаря возможностям Dio легко добавить учёт параметра локализации.
- **Хранение всех локализаций** - Пока подразумевается, что приложение будет иметь все возможные локализации. Было бы интересно реализовать их "докачку" в завимости от надобности. Например по-умолчанию есть только английская, и пользователю будет предложено докачать перевод в зависимости от языка его системы или выбранной страны в профиле. В конечном итоге на устройстве пользователя глобально будут только два arb файла локализации, вместо ВСЕХ. 
- **Работа с контактами** - Быстро поправимая недоработка связанная с дореализацией возможностей пакета url_launcher, была только добавлена обработка нажатие по ссылке компании, ведущую на сайт визитку в браузере. Так очень легко можно добавить открытие номера с его автоматическим вводом в приложении для звонков. Подразумевалось, что отправка по почте результатов подсчетов в калькуляторе будет происходить  через SMTP бэка, но можно было легко тоже дать возможность открыть приложения для отправки электронных писем и подставить значения из калькулятора.
- **Сохранение настроек приложения** - Только в конце вспомнилось о надобности добавить нормальную поддержку разных языков и темы приложения. Нужно было бы добавить поля адаптера "для коробки настроек" хайв, перегенерировать g.dart файлы, добавить их сохранение в неё, как и другие возможные поля на экране редактирования, а также реализовать их использовании при открытии приложения. Пока при каждом запуске приложения локализация и тема выбираются автоматически системные. 
- **Калькулятор** - В оригинальном проекте файл калькулятора был огромным и трудно читаемым файлом с огромными выводами виджетов в завимости от условий выбора. Изначально планировалось уделить большое внимание хорошей и правильной декомпозици его логики и интерфейса. Нужно было организовать сам экран для подсчётов, элемент калькулятора, внутренности которого строились бы в зависмости от выбранной формулы и также не забыть про обработку разных систем счисления.
В идеале перестроить все так, чтобы файл формулы не возвращал бы виджет, а просто содержал бы в себе поля и функцию подсчета. То есть чтобы в идеале новую формулу мог добавить НЕ программист (Или вообще добавить конструктор формул, сохраняющий её в каком-то формате и способный развернуть обратно как рабочую формулу для расчёта).
- **Нарушение DRY** - Don't Repeat Yourself, не повторяй за собой. Калькулятор очень пострадал, нужно было с самого начала предусмотреть работу с флагом isSI (Является ли текущая система СИ), чтобы она просто использовалась без упоминаний и проп дриллинга по дереву виджетов. Так и помошник по конвертации величин - conversion_helper.dart, был бы понятнееи существенно сокращал бы код.
- **Адаптивный интерфейс** - Во время тестов на экранах разного масштаба на экране кальулятора можно было заметить, как плитки форм теряют порядок из-за разной длины текста. Следовало бы ровнять виджеты подписей форм через IntrinsicHeight в Wrap с подсчетом чётности, что лучше нужно правильно встроить в строитель формул. Это позволило бы избежать ошибок прошлого пункта и спасти разработиков от учета количества букв. 
- **Использование Изолятов для подсчётов калькулятора** - Не понятно насколько оправданным было бы их использование в достаточно простых математических подсчётах. Но будь тут задействованы перемножения матриц, то использование изолятов было бы обязательным для сохранения отзывчивости приложения. 
- **Глобальный Дев/Дебаг флаг** - Разработанный бэк сервер часто падал и чтобы всегда его не поднимать использовались мок файлы, которые брались при костыльном флаге в самом файле. Наверное стоило делать сразу флаг, который бы часто использовался и просто переключался при теоретическом выходе в прод.
- **Не очень кроссплатформенное приложение** - В ходе работы были замечены ограничения кастомных пакетов, которые могут быть не такими универсальными. Было замечено, что пакеты затрагивающие системные возможности в FQA имеют ссылки на аналоги для Android/iPhone, Windows/Mac/Linux или вообще для бразуера, то есть нужно всё равно учитывать в коде тип устройства для приложения. Ещё было отмечено, что встроенный devtools браузера Edge имеет возможность  эмуляцию девайсов с сенсорным экраном разного размера.

# Заключение
  Было интересно поработать с мобильной разработкой и выполнить ВКР по реальному проекту.
Кроме простого изучения семантики Dart и Flutter было интересно посмотреть за скоротечным развитием технологии. Можно было удивиться простоте перехода после изучения веб-технологий, особенно постоянно обновляющейся официальной документации и "курсам миграции" для разработчиков с разным прошлым опытом.
